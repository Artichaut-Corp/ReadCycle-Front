<script>
  let session = false;

  function handleSignOut() {
    return session = false;
  }

  function handleSignIn() {
    return session = true;
  }



</script>

<navbar> 
  <header class="navbar bg-accent-content mb-12">
    <div class="flex-1">
      <a class="btn btn-ghost normal-case text-x1" href="/">TBD</a>
      <svg width="367" height="344" viewBox="0 0 367 344" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M40 42C40 40.8954 40.8954 40 42 40H325C326.105 40 327 40.8954 327 42V302C327 303.105 326.105 304 325 304H42C40.8954 304 40 303.105 40 302V42Z" fill="#404040"/>
        <rect x="91" y="74" width="41" height="182" fill="#D08DF0"/>
        <rect x="98" y="82" width="27" height="168" fill="#F9C0F3"/>
        <rect x="162" y="91" width="42" height="165" fill="#57A5D1"/>
        <rect x="132" y="103" width="30" height="153" fill="#F33E3E"/>
        <rect x="137" y="110" width="20" height="138" fill="#F58282"/>
        <rect x="167" y="97" width="32" height="151" fill="#78C6DF"/>
        <rect x="204" y="140.391" width="26" height="131" rx="2" transform="rotate(-28.4618 204 140.391)" fill="#80DA60"/>
        <rect x="210" y="142.309" width="17.2487" height="120.169" transform="rotate(-28.796 210 142.309)" fill="#ACDC95"/>
        <path d="M42 41H325V39H42V41ZM326 42V302H328V42H326ZM325 303H42V305H325V303ZM41 302V42H39V302H41ZM42 303C41.4477 303 41 302.552 41 302H39C39 303.657 40.3431 305 42 305V303ZM326 302C326 302.552 325.552 303 325 303V305C326.657 305 328 303.657 328 302H326ZM325 41C325.552 41 326 41.4477 326 42H328C328 40.3432 326.657 39 325 39V41ZM42 39C40.3431 39 39 40.3431 39 42H41C41 41.4477 41.4477 41 42 41V39Z" fill="white" fill-opacity="0.1"/>
        <rect x="40" y="4" width="59.3333" height="30" rx="3" fill="#404040"/>
        <rect x="40.5" y="4.5" width="58.3333" height="29" rx="2.5" stroke="black" stroke-opacity="0.14902"/>
        <path d="M51.3438 16C51.2969 15.6042 51.1068 15.2969 50.7734 15.0781C50.4401 14.8594 50.0313 14.75 49.5469 14.75C49.1927 14.75 48.8828 14.8073 48.6172 14.9219C48.3542 15.0365 48.1484 15.194 48 15.3945C47.8542 15.5951 47.7813 15.8229 47.7813 16.0781C47.7813 16.2917 47.832 16.4753 47.9336 16.6289C48.0378 16.7799 48.1706 16.9062 48.332 17.0078C48.4935 17.1068 48.6628 17.1888 48.8398 17.2539C49.0169 17.3164 49.1797 17.3672 49.3281 17.4062L50.1406 17.625C50.349 17.6797 50.5807 17.7552 50.8359 17.8516C51.0938 17.9479 51.3398 18.0794 51.5742 18.2461C51.8112 18.4102 52.0065 18.6211 52.1602 18.8789C52.3138 19.1367 52.3906 19.4531 52.3906 19.8281C52.3906 20.2604 52.2773 20.651 52.0508 21C51.8268 21.349 51.4987 21.6263 51.0664 21.832C50.6367 22.0378 50.1146 22.1406 49.5 22.1406C48.9271 22.1406 48.431 22.0482 48.0117 21.8633C47.5951 21.6784 47.2669 21.4206 47.0273 21.0898C46.7904 20.7591 46.6563 20.375 46.625 19.9375H47.625C47.651 20.2396 47.7526 20.4896 47.9297 20.6875C48.1094 20.8828 48.3359 21.0286 48.6094 21.125C48.8854 21.2187 49.1823 21.2656 49.5 21.2656C49.8698 21.2656 50.2018 21.2057 50.4961 21.0859C50.7904 20.9635 51.0234 20.7943 51.1953 20.5781C51.3672 20.3594 51.4531 20.1042 51.4531 19.8125C51.4531 19.5469 51.3789 19.3307 51.2305 19.1641C51.082 18.9974 50.8867 18.862 50.6445 18.7578C50.4023 18.6536 50.1406 18.5625 49.8594 18.4844L48.875 18.2031C48.25 18.0234 47.7552 17.7669 47.3906 17.4336C47.026 17.1003 46.8438 16.6641 46.8438 16.125C46.8438 15.6771 46.9648 15.2865 47.207 14.9531C47.4518 14.6172 47.7799 14.3568 48.1914 14.1719C48.6055 13.9844 49.0677 13.8906 49.5781 13.8906C50.0938 13.8906 50.5521 13.9831 50.9531 14.168C51.3542 14.3503 51.6719 14.6003 51.9062 14.918C52.1432 15.2357 52.2682 15.5964 52.2813 16H51.3438ZM56.374 22.125C55.7959 22.125 55.2972 21.9974 54.8779 21.7422C54.4613 21.4844 54.1396 21.125 53.9131 20.6641C53.6891 20.2005 53.5771 19.6615 53.5771 19.0469C53.5771 18.4323 53.6891 17.8906 53.9131 17.4219C54.1396 16.9505 54.4548 16.5833 54.8584 16.3203C55.2646 16.0547 55.7386 15.9219 56.2803 15.9219C56.5928 15.9219 56.9014 15.974 57.2061 16.0781C57.5107 16.1823 57.7881 16.3516 58.0381 16.5859C58.2881 16.8177 58.4873 17.125 58.6357 17.5078C58.7842 17.8906 58.8584 18.362 58.8584 18.9219V19.3125H54.2334V18.5156H57.9209C57.9209 18.1771 57.8532 17.875 57.7178 17.6094C57.585 17.3437 57.3949 17.1341 57.1475 16.9805C56.9027 16.8268 56.6136 16.75 56.2803 16.75C55.9131 16.75 55.5954 16.8411 55.3271 17.0234C55.0615 17.2031 54.8571 17.4375 54.7139 17.7266C54.5706 18.0156 54.499 18.3255 54.499 18.6562V19.1875C54.499 19.6406 54.5771 20.0247 54.7334 20.3398C54.8923 20.6523 55.1123 20.8906 55.3936 21.0547C55.6748 21.2161 56.0016 21.2969 56.374 21.2969C56.6162 21.2969 56.835 21.263 57.0303 21.1953C57.2282 21.125 57.3988 21.0208 57.542 20.8828C57.6852 20.7422 57.7959 20.5677 57.874 20.3594L58.7646 20.6094C58.6709 20.9115 58.5133 21.1771 58.292 21.4062C58.0706 21.6328 57.7972 21.8099 57.4717 21.9375C57.1462 22.0625 56.7803 22.125 56.374 22.125ZM62.6982 22.125C62.1357 22.125 61.6514 21.9922 61.2451 21.7266C60.8389 21.4609 60.5264 21.0951 60.3076 20.6289C60.0889 20.1628 59.9795 19.6302 59.9795 19.0312C59.9795 18.4219 60.0915 17.8841 60.3154 17.418C60.542 16.9492 60.8571 16.5833 61.2607 16.3203C61.667 16.0547 62.141 15.9219 62.6826 15.9219C63.1045 15.9219 63.4847 16 63.8232 16.1562C64.1618 16.3125 64.4391 16.5312 64.6553 16.8125C64.8714 17.0937 65.0055 17.4219 65.0576 17.7969H64.1357C64.0654 17.5234 63.9092 17.2812 63.667 17.0703C63.4274 16.8568 63.1045 16.75 62.6982 16.75C62.3389 16.75 62.0238 16.8437 61.7529 17.0312C61.4847 17.2161 61.2751 17.4779 61.124 17.8164C60.9756 18.1523 60.9014 18.5469 60.9014 19C60.9014 19.4635 60.9743 19.8672 61.1201 20.2109C61.2686 20.5547 61.4769 20.8216 61.7451 21.0117C62.016 21.2018 62.3337 21.2969 62.6982 21.2969C62.9378 21.2969 63.1553 21.2552 63.3506 21.1719C63.5459 21.0885 63.7113 20.9688 63.8467 20.8125C63.9821 20.6562 64.0785 20.4687 64.1357 20.25H65.0576C65.0055 20.6042 64.8766 20.9232 64.6709 21.207C64.4678 21.4883 64.1982 21.7122 63.8623 21.8789C63.529 22.043 63.141 22.125 62.6982 22.125ZM69.0146 16V16.7812H65.9053V16H69.0146ZM66.8115 14.5625H67.7334V20.2812C67.7334 20.5417 67.7712 20.737 67.8467 20.8672C67.9248 20.9948 68.0238 21.0807 68.1436 21.125C68.266 21.1667 68.3949 21.1875 68.5303 21.1875C68.6318 21.1875 68.7152 21.1823 68.7803 21.1719C68.8454 21.1589 68.8975 21.1484 68.9365 21.1406L69.124 21.9687C69.0615 21.9922 68.9743 22.0156 68.8623 22.0391C68.7503 22.0651 68.6084 22.0781 68.4365 22.0781C68.1761 22.0781 67.9209 22.0221 67.6709 21.9102C67.4235 21.7982 67.2178 21.6276 67.0537 21.3984C66.8923 21.1693 66.8115 20.8802 66.8115 20.5312V14.5625ZM70.4014 22V16H71.3232V22H70.4014ZM70.8701 15C70.6904 15 70.5355 14.9388 70.4053 14.8164C70.2777 14.694 70.2139 14.5469 70.2139 14.375C70.2139 14.2031 70.2777 14.056 70.4053 13.9336C70.5355 13.8112 70.6904 13.75 70.8701 13.75C71.0498 13.75 71.2035 13.8112 71.3311 13.9336C71.4613 14.056 71.5264 14.2031 71.5264 14.375C71.5264 14.5469 71.4613 14.694 71.3311 14.8164C71.2035 14.9388 71.0498 15 70.8701 15ZM75.4492 22.125C74.9076 22.125 74.4323 21.9961 74.0234 21.7383C73.6172 21.4805 73.2995 21.1198 73.0703 20.6562C72.8438 20.1927 72.7305 19.651 72.7305 19.0312C72.7305 18.4062 72.8438 17.8607 73.0703 17.3945C73.2995 16.9284 73.6172 16.5664 74.0234 16.3086C74.4323 16.0508 74.9076 15.9219 75.4492 15.9219C75.9909 15.9219 76.4648 16.0508 76.8711 16.3086C77.2799 16.5664 77.5977 16.9284 77.8242 17.3945C78.0534 17.8607 78.168 18.4062 78.168 19.0312C78.168 19.651 78.0534 20.1927 77.8242 20.6562C77.5977 21.1198 77.2799 21.4805 76.8711 21.7383C76.4648 21.9961 75.9909 22.125 75.4492 22.125ZM75.4492 21.2969C75.8607 21.2969 76.1992 21.1914 76.4648 20.9805C76.7305 20.7695 76.9271 20.4922 77.0547 20.1484C77.1823 19.8047 77.2461 19.4323 77.2461 19.0312C77.2461 18.6302 77.1823 18.2565 77.0547 17.9102C76.9271 17.5638 76.7305 17.2839 76.4648 17.0703C76.1992 16.8568 75.8607 16.75 75.4492 16.75C75.0378 16.75 74.6992 16.8568 74.4336 17.0703C74.168 17.2839 73.9714 17.5638 73.8438 17.9102C73.7161 18.2565 73.6523 18.6302 73.6523 19.0312C73.6523 19.4323 73.7161 19.8047 73.8438 20.1484C73.9714 20.4922 74.168 20.7695 74.4336 20.9805C74.6992 21.1914 75.0378 21.2969 75.4492 21.2969ZM80.4971 18.3906V22H79.5752V16H80.4658V16.9375H80.5439C80.6846 16.6328 80.8981 16.388 81.1846 16.2031C81.471 16.0156 81.8408 15.9219 82.2939 15.9219C82.7002 15.9219 83.0557 16.0052 83.3604 16.1719C83.665 16.3359 83.902 16.5859 84.0713 16.9219C84.2406 17.2552 84.3252 17.6771 84.3252 18.1875V22H83.4033V18.25C83.4033 17.7786 83.2809 17.4115 83.0361 17.1484C82.7913 16.8828 82.4554 16.75 82.0283 16.75C81.734 16.75 81.471 16.8138 81.2393 16.9414C81.0101 17.069 80.8291 17.2552 80.6963 17.5C80.5635 17.7448 80.4971 18.0417 80.4971 18.3906ZM91.9004 14V22H90.9316V15.0156H90.8848L88.9316 16.3125V15.3281L90.9316 14H91.9004Z" fill="white"/>
        </svg>
    </div>
    <div class="flex-none">
      <div class="flex justify-end flex-1 px-2">
        <div class="flex items-stretch">
          <div class="flex place-items-center">
            {#if !session}
              <button on:click="{handleSignIn}" class="link">Connection</button>
            {:else}
              <p class="inline-block">Connecté</p>
            {/if}
          </div>
          <div class="dropdown dropdown-end">
            <label tabindex="0" class="btn btn-ghost rounded-btn">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block w-5 h-5 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"></path></svg>
            </label>
            <ul tabindex="0" class="menu dropdown-content z-[1] p-2 shadow bg-base-200 rounded-box w-52 mt-4">
              <li><a class="link" href="/profile">Profile</a></li> 
              <li><button onclick="logout.showModal()" on:click="{handleSignOut}" class="link">Déconnexion</button></li>
              <li><a class="link" href="/books">Books</a></li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </header>
</navbar>

<dialog id="logout" class="modal modal-bottom sm:modal-middle">
  <form method="dialog" class="modal-box">
    <h3 class="font-bold text-lg">Vous avez bien été déconnecté</h3>
    <p class="py-4"><button class="link" href="/login">Se connecter avec un autre compte</button></p>
    <div class="modal-action">
      <!-- if there is a button in form, it will close the modal -->
      <button class="btn">Fermer</button>
    </div>
  </form>
</dialog>

